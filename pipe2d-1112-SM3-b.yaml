#
# initial detectorMap
#
# The files are to be found in dirName, taken to be relative to --dataDir if
# not an absolute path
#
init:
  dirName: "$DRP_PFS_DATA_DIR/detectorMap"
  arms: [b3, r3, n3, m3]
  detectorMapFmt: "detectorMap-sim-{arm}.fits"

#
# Blocks of data which are used together to update the calibrations
#
calibBlock:
  -
    name: calibs-b
    bias:
      id: ["visit=81928..81943", "arm=b", "spectrograph=3"]
    dark:
      id: ["visit=81832..81846", "arm=b", "spectrograph=3"]
    flat:
      id: ["visit=81880", "arm=b", "spectrograph=3"]
    bootstrap:
      group:
        -
          flatId: ["visit=81880", "arm=b", "spectrograph=3"]
          arcId: ["visit=81869", "arm=b", "spectrograph=3"]
          configfile: "bootstrap_config.py" # for lamp override
    fiberProfiles:
      group:
        -
          id: ["visit=81880", "arm=b", "spectrograph=3"]
    detectorMap:
      id: ["visit=81869^81871", "arm=b", "spectrograph=3"]
      configfile: "reduceArc_config.py" # for lamp override
      config:
        - "reduceExposure.isr.doFlat=False"
        - "fitDetectorMap.doSlitOffsets=True"
        - "reduceExposure.readLineList.exclusionRadius=0.3"
        - "fitDetectorMap.minSignalToNoise=20"
